
# 数据库引擎

数据库引擎是用于存储、处理和保护数据的核心服务。利用数据库引擎可控制访问权限并快速处理事务，从而满足企业内大多数需要处理大量数据的应用程序的要求。

## InnoDB

InnoDB是一个事务型的存储引擎，有行级锁定和外键约束。
Innodb引擎提供 **对数据库ACID事务的支持**，并且实现了SQL标准的四种 **隔离级别**。该引擎还提供了行级锁和外键约束，它的设计目标是处理大容量数据库系统。

## MyIsam

MyIASM是MySQL默认的引擎，但是它没有提供对数据库事务的支持，也不支持行级锁和外键，因此当INSERT(插入)或UPDATE(更新)数据时即写操作需要锁定整个表，效率便会低一些。

**特点**
1. 查询速度很快
2. MyISAM极度强调快速读取操作
3. MyIASM中存储了表的行数

**缺点**
1. 不能在表损坏后恢复数据
2. 不支持事务的设计


## InnoDB和MyIsam使用及其原理对比：

**插入效率**：速度上MyISAM快，但是增删改是涉及事务安全的，所以用InnoDB相对好很多。
**行数保存**：InnoDB 中不保存表的具体行数，也就是说，执行select count() from table时，InnoDB要扫描一遍整个表来计算有多少行，但是MyISAM只要简单的读出保存好的行数即可。
**索引存储**：对于AUTO_INCREMENT类型的字段，InnoDB中必须包含只有该字段的索引，但是在MyISAM表中，可以和其他字段一起建立联合索引。MyISAM支持全文索引（FULLTEXT）、压缩索引，InnoDB不支持
**锁的支持**：MyISAM只支持表锁。InnoDB支持表锁、行锁 行锁大幅度提高了多用户并发操作的新能。但是InnoDB的行锁，只是在WHERE的主键是有效的，非主键的WHERE都会锁全表的

## InnoDB和MyIsam引擎原理

聚簇索引的叶子节点就是数据节点，而非聚簇索引的叶子节点仍然是索引节点，只不过有指向对应数据块的指针。

### MyIASM引擎的索引结构

**MyISAM索引结构**：MyISAM索引用的B+ tree来储存数据，MyISAM索引的指针指向的是键值的地址，地址存储的是数据。

**索引检索**：MyISAM中索引检索的算法为首先按照B+Tree搜索算法搜索索引，如果指定的Key存在，则取出其data域的值，然后以data域的值为地址，根据data域的值去读取相应数据记录。

### InnoDB引擎的索引结构

**InnoDB索引结构**：Innodb的索引文件本身就是数据文件，即B+Tree的数据域存储的就是实际的数据，这种索引就是聚集索引。这个索引的key就是数据表的主键，因此InnoDB表数据文件本身就是主索引。